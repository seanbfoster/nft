{"ast":null,"code":"import Web3 from \"web3\";\n\nconst contractABI = require(\"../contract-abi.json\");\n\nconst contractAddress = \"0xC73B2C2A555F845796A42c69B5b6Bc21394929A1\";\nexport const connectWallet = async () => {\n  if (window.ethereum) {\n    try {\n      const addressArray = await window.ethereum.request({\n        method: 'eth_requestAccounts'\n      });\n      return {\n        status: \"wallet connected\",\n        address: addressArray[0]\n      };\n    } catch (err) {\n      return {\n        status: err.message,\n        address: \"\"\n      };\n    }\n  } else {\n    return {\n      status: \"Wallet not detected\",\n      address: \"\"\n    };\n  }\n};\nexport const getCurrentWallet = async () => {\n  if (window.ethereum) {\n    try {\n      const addressArray = await window.ethereum.request({\n        method: 'eth_accounts'\n      });\n\n      if (addressArray.length > 0) {\n        return {\n          status: \"wallet connected\",\n          address: addressArray[0]\n        };\n      } else {\n        return {\n          status: \"please connect your wallet\",\n          address: \"\"\n        };\n      }\n    } catch (err) {\n      return {\n        status: err.message,\n        address: \"\"\n      };\n    }\n  } else {\n    return {\n      status: \"\",\n      wallet: \"Wallet not detected\"\n    };\n  }\n};\nexport const mintNFT = async numTokens => {\n  const mintPrice = Web3.utils.toWei('.07', 'ether');\n  var web3 = new Web3(Web3.givenProvider);\n  window.contract = new web3.eth.Contract(contractABI, contractAddress);\n  const transactionParameters = {\n    to: contractAddress,\n    from: window.ethereum.selectedAddress,\n    // must match user's active address.\n    value: Web3.utils.toHex(mintPrice * numTokens),\n    'data': window.contract.methods.mintTeslaBot(numTokens).encodeABI() //make call to NFT smart contract \n\n  };\n\n  try {\n    const txHash = await window.ethereum.request({\n      method: \"eth_sendTransaction\",\n      params: [transactionParameters]\n    });\n    alert(\"it worked?\");\n  } catch (err) {// alert(err.message)\n  }\n};","map":{"version":3,"sources":["/Users/seanfoster/Documents/nft-minter-tutorial/nft-minter/src/util/dapp.js"],"names":["Web3","contractABI","require","contractAddress","connectWallet","window","ethereum","addressArray","request","method","status","address","err","message","getCurrentWallet","length","wallet","mintNFT","numTokens","mintPrice","utils","toWei","web3","givenProvider","contract","eth","Contract","transactionParameters","to","from","selectedAddress","value","toHex","methods","mintTeslaBot","encodeABI","txHash","params","alert"],"mappings":"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","sourcesContent":["import Web3 from \"web3\";\n\nconst contractABI = require(\"../contract-abi.json\");\nconst contractAddress = \"0xC73B2C2A555F845796A42c69B5b6Bc21394929A1\";\n\nexport const connectWallet = async () => {\n    \n    if (window.ethereum) {\n        try {\n            const addressArray = await window.ethereum.request({method: 'eth_requestAccounts'});\n\n            return {\n                status: \"wallet connected\",\n                address: addressArray[0]\n            }\n        }\n        catch (err) {\n            return {\n                status: err.message,\n                address: \"\"\n            }\n        }\n    }\n\n    else {\n        return {\n            status: \"Wallet not detected\",\n            address: \"\"\n        }\n    }\n}\n\nexport const getCurrentWallet = async () => {\n    if(window.ethereum){\n        try {\n            const addressArray = await window.ethereum.request({method: 'eth_accounts'});\n            \n            if(addressArray.length > 0) {\n                return {\n                    status: \"wallet connected\",\n                    address: addressArray[0]\n                }\n            }\n\n            else {\n                return {\n                    status: \"please connect your wallet\",\n                    address: \"\"\n                }\n            }\n        }\n\n        catch (err){\n            return {\n                status: err.message,\n                address: \"\"\n            }\n        }\n    }\n    else{\n        return {\n            status: \"\",\n            wallet: \"Wallet not detected\"\n        }\n    }\n}\n\nexport const mintNFT = async (numTokens) => {\n\n    const mintPrice = Web3.utils.toWei('.07', 'ether')\n\n    var web3 = new Web3(Web3.givenProvider)\n\n    window.contract = new web3.eth.Contract(contractABI, contractAddress)\n\n    const transactionParameters = {\n        to: contractAddress,\n        from: window.ethereum.selectedAddress, // must match user's active address.\n        value: Web3.utils.toHex(mintPrice * numTokens),\n        'data': window.contract.methods.mintTeslaBot(numTokens).encodeABI() //make call to NFT smart contract \n    }\n\n    try {\n        const txHash = await window.ethereum.request({\n            method: \"eth_sendTransaction\",\n            params: [transactionParameters],\n        })\n        alert(\"it worked?\")\n    }\n\n    catch(err) {\n        // alert(err.message)\n    }\n    \n}"]},"metadata":{},"sourceType":"module"}